<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Book Package</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: radial-gradient(circle at 23% 20%, #43cea2 0%, #185a9d 85%); min-height: 100vh;}
        .book-box { background: #fff; border-radius: 18px; box-shadow: 0 12px 42px #185a9d23; margin: 55px auto; padding: 2.3em; max-width: 820px;}
        .book-title { font-size:2rem; font-weight:bold; color:#232323; text-align:center; margin-bottom:24px;}
        .book-form label {font-weight:600; color:#185a9d;}
        .book-form .form-control, .book-form .form-select {margin-bottom:10px;}
        .book-btn-row { display:flex; gap:20px; justify-content:center; margin-top:22px;}
        .img-col {text-align:center;}
        .book-img {max-width:350px; border-radius:14px; box-shadow:0 8px 30px #185a9d22;}
        .total-price {font-weight:bold; color:#18c618;}
    </style>
</head>
<body>
    <div class="book-box">
        <div class="book-title">BOOK PACKAGE</div>
        <form class="book-form" action="BookPackageServlet" method="post">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <label>Username</label>
                    <input class="form-control" type="text" name="username" required value="">

                    <label>Select Package</label>
                    <select class="form-select" name="package_type" id="packageType" required>
                        <option value="GOLD PACKAGE">GOLD PACKAGE</option>
                        <option value="SILVER PACKAGE">SILVER PACKAGE</option>
                        <option value="DIAMOND PACKAGE">DIAMOND PACKAGE</option>
                        <option value="PLATINUM PACKAGE">PLATINUM PACKAGE</option>
                    </select>

                    <label>Total Persons</label>
                    <input class="form-control" type="number" min="1" name="total_persons" id="totalPersons" value="1" required>

                    <label>ID</label>
                    <input class="form-control" type="text" name="id_type" required>

                    <label>Number</label>
                    <input class="form-control" type="text" name="id_number" required>

                    <label>Phone</label>
                    <input class="form-control" type="text" name="phone" required>

                    <label>Total Price</label>
                    <input class="form-control total-price" type="text" name="total_price" id="totalPrice" readonly value="12000">

                    <div class="book-btn-row">
                        <button type="button" class="btn btn-dark" onclick="calculatePrice()">Check Price</button>
                        <button type="submit" class="btn btn-success">Book Package</button>
                        <a href="CheckPackage.html" class="btn btn-dark">Back</a>
                    </div>
                </div>
                <div class="col-md-6 img-col">
                    <img id="pkgImg" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80" class="book-img" alt="Package Image">
                </div>
            </div>
        </form>
    </div>
    <script>
        // Prices for packages
        const prices = {
            "GOLD PACKAGE": 12000,
            "SILVER PACKAGE": 7000,
            "DIAMOND PACKAGE": 25000,
            "PLATINUM PACKAGE": 40000
        };
        // Images for packages
        const pkgImgs = {
            "GOLD PACKAGE": "https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80",
            "SILVER PACKAGE": "https://images.unsplash.com/photo-1465156799763-2c087c332922?auto=format&fit=crop&w=800&q=80",
            "DIAMOND PACKAGE": "https://images.unsplash.com/photo-1417870839255-a23faa90c6b0?auto=format&fit=crop&w=800&q=80",
            "PLATINUM PACKAGE": "https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=800&q=80"
        };
        function calculatePrice() {
            let pkg = document.getElementById("packageType").value;
            let persons = parseInt(document.getElementById("totalPersons").value) || 1;
            let price = prices[pkg] * persons;
            document.getElementById("totalPrice").value = price;
        }
        // Auto-select package from query parameter
        window.onload = function() {
            let params = new URLSearchParams(window.location.search);
            let pkg = params.get("pkg");
            if (pkg && prices[pkg]) {
                document.getElementById("packageType").value = pkg;
                document.getElementById("pkgImg").src = pkgImgs[pkg];
                calculatePrice();
            }
        };
        document.getElementById("packageType").addEventListener("change", function() {
            calculatePrice();
            let pkg = this.value;
            document.getElementById("pkgImg").src = pkgImgs[pkg];
        });
        document.getElementById("totalPersons").addEventListener("input", calculatePrice);
    </script>
</body>
</html>
